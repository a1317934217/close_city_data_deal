# coding:utf-8
"""
@file: section_two_People_Flow.py
@author: wu hao
@time: 2023/5/20 17:05
@env: 封城数据处理
@desc:
@ref:
"""
import csv
import datetime
import json
import os

import re

import requests

#json解析
from tqdm import tqdm

# 城市迁徙比例数据保存路径 in
migration_proportion_in = 'F:/百度迁徙数据_日常维护/迁徙比例/in/'
# 城市迁徙比例数据保存路径 out
migration_proportion_out = 'F:/百度迁徙数据_日常维护/迁徙比例/out/'



#  获取时间列表
def getdaylist(begin, end):
    """
    获取时间列表
    """
    beginDate = datetime.datetime.strptime(str(begin), "%Y%m%d")
    endDate = datetime.datetime.strptime(str(end), "%Y%m%d")
    dayList = []
    while beginDate <= endDate:
        dayList.append(datetime.datetime.strftime(beginDate, "%Y%m%d"))
        beginDate += datetime.timedelta(days=+1)
    return dayList





def find_migration_proportion(main_city,city_list_name,day_list):
    file_list  = [migration_proportion_in,migration_proportion_out]
    type_list =["move_in","move_out"]
    one=[]
    two = []
    three = []
    four = []
    five = []
    six = []
    seven = []
    eight = []
    nine=[]
    ten=[]
    eleven = []
    twelve =[]

    one_1 = []
    two_1 = []
    three_1 = []
    four_1 = []
    five_1 = []
    six_1 = []
    seven_1 = []
    eight_1 = []
    nine_1 = []
    ten_1 = []
    eleven_1 = []
    twelve_1 = []
    one_list = [one,two,three,four,five, six, seven, eight,nine,ten,eleven,twelve]

    two_list = [one_1,two_1,three_1,four_1,five_1, six_1, seven_1, eight_1,nine_1,ten_1,eleven_1,twelve_1]
    for type_i,file_i  in zip(type_list,file_list):
       if type_i=="move_in":
           for city_name,list_name in zip(city_list_name,one_list):
                for day_i in day_list:
                    flag = 0
                    file_name = "{}_{}_{}".format(city_name,type_i,day_i)
                    file = csv.reader(open(file_i+file_name+".csv"))
                    for row in file:
                        if row[0] == main_city+'市':
                            flag = row[1]
                    if flag!=0:
                        list_name.append(flag)
                    else:
                        list_name.append(flag)
       elif type_i=="move_out":
           for city_name,list_name in zip(city_list_name,two_list):
               for day_i in day_list:
                   flag = 0
                   file_name = "{}_{}_{}".format(city_name, type_i, day_i)
                   file = csv.reader(open(file_i + file_name + ".csv"))
                   for row in file:
                       if row[0] == main_city + '市':
                           flag = row[1]
                   if flag != 0:
                       list_name.append(flag)
                   else:
                       list_name.append(flag)
    return one,two,three,four,five, six, seven, eight,nine,ten,eleven,twelve,one_1,two_1,three_1,four_1,five_1, six_1, seven_1, eight_1,nine_1,ten_1,eleven_1,twelve_1
        # print(one_city+type_i+"的迁徙比例为："+str(one))
        # print(len(one))
        # print(two_city+type_i+"的迁徙比例为："+str(two))
        # print(len(two))
        # print(three_city+type_i+"的迁徙比例为："+str(three))
        # print(len(three))
        # print(four_city+type_i+"的迁徙比例为："+str(four))
        # print(len(four))




def caculate_down_propotion(first_number,second_number):
    """
    计算时间顺序的下降比例
    :param first_number:  必须是列表参数的形式
    :param second_number: 必须是列表参数的形式
    :return:
    """
    # 衡量下降
    #最终储存的比例列表

    # 第一个
    num_old = 0
    for s in first_number:
        num_old = num_old + s
    # print(num_old)

    # 第二个
    num_new = 0
    for t in second_number:
        num_new = num_new + t
    # print(num_new)


    # result = (num_old - num_new) / num_new
    result = (num_new - num_old) / num_old

    # return round(result, 4)
    return result

if __name__ == '__main__':

    #name_list=["110000_北京","120000_天津","130500_邢台","131100_衡水"]
    # 西安 ["610400_咸阳","610500_渭南","620100_兰州","610800_榆林"]
    # 哈尔滨 ["230200_齐齐哈尔","231200_绥化","220100_长春","230600_大庆"]
    # 呼伦贝尔 ["230200_齐齐哈尔","152200_兴安盟","230100_哈尔滨","231100_黑河"]
    # 绍兴 ["330100_杭州","330200_宁波","330700_金华","310000_上海"]
    # 石家庄 ["110000_北京","131100,衡水","130300,秦皇岛","130200,唐山","131000,廊坊","120000,天津","130800,承德","130600,保定","130900,沧州","130400,邯郸","130500,邢台","130700,张家口"]


    #绍兴, 330600   20211211, 20211231, 21, 0.05, ["杭州", "宁波", "金华", "上海", "嘉兴", "温州", "台州", "苏州", "湖州", "衢州","无锡", "南京", "绍兴"]
    #呼伦贝尔,  150700  20211127, 20211225, 29, 0.04, ["齐齐哈尔", "兴安盟", "哈尔滨", "黑河", "呼和浩特", "大兴安岭地区", "大庆","北京", "绥化", "通辽", "天津", "赤峰", "呼伦贝尔"]
    # 西安,20211223,20220115,24,0.01,['铜川', '渭南', '成都', '宝鸡', '咸阳', '延安', '商洛', '榆林', '汉中', '庆阳', '北京', '安康', '西安']
    #哈尔滨,20210118,20210212,26,0.02,["齐齐哈尔","绥化","哈尔滨","长春","佳木斯","大庆","北京","牡丹江","上海","天津","青岛","沈阳","鸡西"]
    # 石家庄,20210107,20210129,23,0.04,["石家庄","北京","衡水","秦皇岛","唐山","廊坊","天津","承德","保定","沧州","邯郸","邢台","张家口"]
    #周口, 20211104, 20211125, 22, 0.25, ["郑州", "商丘", "阜阳", "驻马店", "漯河", "金华", "上海", "许昌", "北京","开封", "苏州", "杭州", "周口"]

    day_list = getdaylist(20201201,20210129)
    one,two,three,four,five, six, seven, eight,nine,ten,eleven,twelve,one_1,two_1,three_1,four_1,five_1, six_1, seven_1, eight_1,nine_1,ten_1,eleven_1,twelve_1\
        = find_migration_proportion("石家庄",
    ["110000_北京","131100_衡水","130300_秦皇岛","130200_唐山","131000_廊坊","120000_天津","130800_承德","130600_保定","130900_沧州","130400_邯郸","130500_邢台","130700_张家口"]
     ,day_list)
    lista = [one,two,three,four,five, six, seven, eight,nine,ten,eleven,twelve]
    listb = [one_1,two_1,three_1,four_1,five_1, six_1, seven_1, eight_1,nine_1,ten_1,eleven_1,twelve_1]
    for i,j in zip(lista,listb):
        sum_lst = [(float(x) + float(y))/2 for x, y in zip(i, j)]
        # print("处理后的后的列表",sum(sum_lst)/len(sum_lst))
    # for i in lista:
    #     sum_lst = [float(x)  for x  in i]
    #     print("处理后的后的列表长度",len(sum_lst))
        # print("处理后的后的列表",sum_lst)
        # for i, j in zip(day_list, range(len(sum_lst))):
        #     print(i,j)
        lock_down_propotion = sum_lst[15:37]
        unlock_down_propotion = sum_lst[37:59]
        # print(sum(lock_down_propotion) / len(lock_down_propotion))
        # print(sum(unlock_down_propotion) / len(unlock_down_propotion))
        print(sum(lock_down_propotion) / len(lock_down_propotion) -sum(unlock_down_propotion) / len(unlock_down_propotion) )
        # print(caculate_down_propotion(unlock_down_propotion, lock_down_propotion))








    # beijing_move_in=['0.024', '0.023399999999999997', '0.0218', '0.024', '0.0248', '0.0255', '0.0298', '0.024300000000000002', '0.022799999999999997', '0.0222', '0.0229', '0.022799999999999997', '0.0253', '0.029300000000000003', '0.0246', '0.023399999999999997', '0.0218', '0.0233', '0.026000000000000002', '0.0252', '0.0297', '0.024399999999999998', '0.0235', '0.022000000000000002', '0.0229', '0.0269', '0.0233', '0.027000000000000003', '0.0217', '0.0226', '0.0199', '0.0259', '0.023799999999999998', '0.0323', '0.036000000000000004', '0.0285', '0.0225', '0.0079', '0.0040999999999999995', '0.0024', 0, 0, 0, 0, 0, '0.0024', '0.0015', 0, 0, '0.0012', 0, 0, 0, '0.0014000000000000002', 0, 0, 0, '0.0014000000000000002', '0.0014000000000000002', '0.0023', '0.0027', '0.0019', '0.0012', '0.0017000000000000001', '0.0023', '0.002', '0.0026', '0.003', '0.0032', '0.0032', '0.009300000000000001', '0.0169', '0.020499999999999997', '0.0175', '0.014199999999999999', '0.0129', '0.0134', '0.0137', '0.0123', '0.0124', '0.012', '0.0128', '0.0134', '0.0151', '0.015', '0.0144', '0.0144', '0.015600000000000001', '0.0166', '0.0143', '0.018799999999999997']
    # tianjin_move_in=['0.0217', '0.0217', '0.0208', '0.0204', '0.0175', '0.0197', '0.025', '0.023799999999999998', '0.0223', '0.0225', '0.02', '0.0167', '0.0233', '0.0227', '0.0229', '0.022400000000000003', '0.0218', '0.0217', '0.0197', '0.022099999999999998', '0.0233', '0.0233', '0.023', '0.0241', '0.0248', '0.0226', '0.0239', '0.025', '0.0245', '0.0248', '0.0218', '0.0215', '0.0231', '0.030299999999999997', '0.0329', '0.0285', '0.0248', '0.0092', '0.0036', '0.0022', '0.0014000000000000002', '0.0011', '0.0012', '0.0016', '0.0019', '0.0018', '0.0017000000000000001', '0.0025', '0.0028000000000000004', '0.0034000000000000002', '0.0039000000000000003', '0.0042', '0.0038', '0.0038', '0.0043', '0.0053', '0.0045000000000000005', '0.0058', '0.0066', '0.0074', '0.008100000000000001', '0.0091', '0.009899999999999999', '0.0108', '0.0124', '0.0161', '0.0132', '0.011699999999999999', '0.012199999999999999', '0.0109', '0.0104', '0.011699999999999999', '0.0118', '0.010700000000000001', '0.0132', '0.012', '0.0098', '0.0106', '0.0104', '0.0105', '0.0137', '0.0137', '0.012', '0.014199999999999999', '0.0163', '0.0171', '0.0189', '0.016399999999999998', '0.015700000000000002', '0.0149', '0.0187']
    # xingtai_move_in=['0.2849', '0.28350000000000003', '0.2758', '0.27690000000000003', '0.3146', '0.31010000000000004', '0.2958', '0.2804', '0.2687', '0.2688', '0.2799', '0.3038', '0.2952', '0.3187', '0.2925', '0.2917', '0.28809999999999997', '0.2953', '0.3143', '0.2982', '0.3111', '0.2991', '0.3', '0.3007', '0.30760000000000004', '0.319', '0.28309999999999996', '0.2966', '0.2852', '0.2981', '0.2998', '0.37439999999999996', '0.3379', '0.3124', '0.3159', '0.3201', '0.3347', '0.1539', '0.1101', '0.10490000000000001', '0.0941', '0.106', '0.126', '0.1298', '0.1361', '0.1303', '0.12279999999999999', '0.10369999999999999', '0.10220000000000001', '0.08929999999999999', '0.0915', '0.08529999999999999', '0.0998', '0.11019999999999999', '0.0975', '0.1112', '0.1131', '0.09720000000000001', '0.0978', '0.1177', '0.18969999999999998', '0.1714', '0.16190000000000002', '0.195', '0.1808', '0.2096', '0.215', '0.2398', '0.2545', '0.2973', '0.32630000000000003', '0.37770000000000004', '0.38520000000000004', '0.391', '0.3444', '0.3297', '0.33039999999999997', '0.2652', '0.275', '0.2779', '0.2805', '0.2685', '0.2639', '0.2824', '0.2768', '0.2709', '0.3013', '0.3224', '0.32409999999999994', '0.2494', '0.2726']
    # hengshui_move_in=['0.19039999999999999', '0.17980000000000002', '0.18710000000000002', '0.1891', '0.18489999999999998', '0.1869', '0.2126', '0.2046', '0.1918', '0.188', '0.1893', '0.177', '0.1812', '0.22', '0.20929999999999999', '0.20149999999999998', '0.1953', '0.187', '0.19640000000000002', '0.2006', '0.2191', '0.21539999999999998', '0.2122', '0.2054', '0.2096', '0.20920000000000002', '0.1889', '0.2065', '0.191', '0.20079999999999998', '0.1699', '0.1882', '0.2095', '0.21420000000000003', '0.23010000000000003', '0.22030000000000002', '0.228', '0.10460000000000001', '0.07', '0.0467', '0.0409', '0.0446', '0.0436', '0.0453', '0.0536', '0.0519', '0.052000000000000005', '0.0576', '0.0545', '0.0565', '0.059000000000000004', '0.0588', '0.0616', '0.058899999999999994', '0.0616', '0.0604', '0.06559999999999999', '0.0583', '0.0548', '0.0666', '0.0766', '0.09480000000000001', '0.08800000000000001', '0.10210000000000001', '0.0959', '0.1148', '0.0967', '0.10060000000000001', '0.09970000000000001', '0.1144', '0.1388', '0.1678', '0.1858', '0.198', '0.19190000000000002', '0.1805', '0.17420000000000002', '0.1593', '0.16699999999999998', '0.1617', '0.18030000000000002', '0.17559999999999998', '0.17579999999999998', '0.1833', '0.1845', '0.1745', '0.17550000000000002', '0.18489999999999998', '0.192', '0.1343', '0.1524']
    # list_a=[beijing_move_in,tianjin_move_in,xingtai_move_in,hengshui_move_in]
    #
    #
    # beijing_move_out=['0.0227', '0.0223', '0.0219', '0.0256', '0.0339', '0.025', '0.0248', '0.022000000000000002', '0.0217', '0.0215', '0.024700000000000003', '0.031400000000000004', '0.024399999999999998', '0.0233', '0.0218', '0.021099999999999997', '0.0219', '0.023799999999999998', '0.031400000000000004', '0.0232', '0.024', '0.0213', '0.0217', '0.0231', '0.022799999999999997', '0.0275', '0.0206', '0.0231', '0.022400000000000003', '0.0223', '0.0288', '0.0349', '0.0229', '0.0196', '0.019', '0.0159', '0.0154', '0.0084', '0.004', '0.0036', '0.003', '0.0026', '0.0021', '0.0024', '0.0034000000000000002', '0.0034999999999999996', '0.0034999999999999996', '0.0046', '0.0036', '0.0037', '0.0040999999999999995', '0.0040999999999999995', '0.004', '0.0038', '0.0048', '0.004', '0.004', '0.004', '0.0042', '0.0049', '0.0046', '0.0073', '0.0066', '0.0072', '0.0072', '0.0073', '0.0088', '0.009000000000000001', '0.009300000000000001', '0.0101', '0.0113', '0.0149', '0.016200000000000003', '0.015600000000000001', '0.012199999999999999', '0.011699999999999999', '0.013000000000000001', '0.0128', '0.0149', '0.0137', '0.0128', '0.013300000000000001', '0.0128', '0.0151', '0.0148', '0.0152', '0.017', '0.0197', '0.0226', '0.0187', '0.0208']
    # tianjin_move_out=['0.019', '0.0199', '0.0202', '0.0215', '0.0232', '0.0189', '0.016399999999999998', '0.0184', '0.0189', '0.0184', '0.0197', '0.0219', '0.02', '0.0176', '0.0207', '0.0203', '0.0207', '0.019299999999999998', '0.024700000000000003', '0.0212', '0.019', '0.0213', '0.0215', '0.022400000000000003', '0.021400000000000002', '0.0235', '0.019799999999999998', '0.0204', '0.0232', '0.024399999999999998', '0.026000000000000002', '0.0304', '0.0225', '0.0195', '0.0163', '0.018600000000000002', '0.0158', '0.0095', '0.0054', '0.0034999999999999996', '0.0033', '0.0019', '0.003', '0.0021', '0.0027', '0.0034999999999999996', '0.0032', '0.0040999999999999995', '0.0033', '0.0044', '0.0049', '0.0046', '0.0044', '0.005', '0.0042', '0.0037', '0.0048', '0.004', '0.005', '0.0067', '0.008199999999999999', '0.0077', '0.0074', '0.0086', '0.0116', '0.0095', '0.009899999999999999', '0.010700000000000001', '0.0109', '0.0111', '0.0127', '0.0126', '0.0115', '0.0098', '0.0051', '0.0062', '0.008199999999999999', '0.0104', '0.011000000000000001', '0.0095', '0.010700000000000001', '0.0121', '0.013000000000000001', '0.0128', '0.015700000000000002', '0.015300000000000001', '0.0148', '0.0173', '0.017', '0.0169', '0.0163']
    # xingtai_move_out=['0.2785', '0.2723', '0.2771', '0.27699999999999997', '0.3095', '0.2921', '0.287', '0.2545', '0.2584', '0.2697', '0.281', '0.3014', '0.2973', '0.2912', '0.2593', '0.2676', '0.2731', '0.2742', '0.30079999999999996', '0.3037', '0.3009', '0.2837', '0.2874', '0.284', '0.3002', '0.2934', '0.2937', '0.293', '0.2844', '0.2916', '0.2969', '0.3136', '0.32159999999999994', '0.3591', '0.28550000000000003', '0.21239999999999998', '0.1862', '0.11109999999999999', '0.0908', '0.1033', '0.1542', '0.17629999999999998', '0.1975', '0.2052', '0.2039', '0.218', '0.1895', '0.1277', '0.1223', '0.1232', '0.10039999999999999', '0.1015', '0.0868', '0.0909', '0.10210000000000001', '0.11810000000000001', '0.1185', '0.1057', '0.11199999999999999', '0.1161', '0.1282', '0.1116', '0.1427', '0.1463', '0.1564', '0.1677', '0.17329999999999998', '0.19039999999999999', '0.20670000000000002', '0.21719999999999998', '0.2299', '0.2305', '0.2339', '0.20010000000000003', '0.2182', '0.2519', '0.2693', '0.2796', '0.2959', '0.2553', '0.2432', '0.2227', '0.2107', '0.2297', '0.22149999999999997', '0.23370000000000002', '0.2519', '0.2368', '0.2516', '0.23800000000000002', '0.26530000000000004']
    # hengshui_move_out=['0.18969999999999998', '0.18899999999999997', '0.19010000000000002', '0.1996', '0.2164', '0.1954', '0.1924', '0.1883', '0.1928', '0.1966', '0.2096', '0.22010000000000002', '0.1984', '0.1865', '0.1869', '0.1935', '0.1931', '0.2077', '0.2192', '0.2114', '0.2082', '0.2118', '0.21960000000000002', '0.2145', '0.2214', '0.21489999999999998', '0.1979', '0.20989999999999998', '0.2119', '0.2157', '0.2138', '0.20800000000000002', '0.2152', '0.21170000000000003', '0.1628', '0.1375', '0.1173', '0.06860000000000001', '0.0513', '0.050300000000000004', '0.044199999999999996', '0.0392', '0.044199999999999996', '0.0475', '0.0493', '0.0519', '0.0603', '0.0591', '0.056100000000000004', '0.0601', '0.0661', '0.0581', '0.06570000000000001', '0.0689', '0.0682', '0.0637', '0.06570000000000001', '0.0634', '0.07', '0.071', '0.0875', '0.0693', '0.0823', '0.0848', '0.08779999999999999', '0.08929999999999999', '0.0942', '0.099', '0.1033', '0.109', '0.1159', '0.1261', '0.1429', '0.1358', '0.11699999999999999', '0.1225', '0.1387', '0.13720000000000002', '0.1467', '0.1295', '0.12710000000000002', '0.1288', '0.1274', '0.1335', '0.1422', '0.1509', '0.1629', '0.175', '0.1632', '0.1501', '0.16870000000000002']
    # list_b=[beijing_move_out,tianjin_move_out,xingtai_move_out,hengshui_move_out]



    beijing_move_in=['0.0764', '0.08539999999999999', '0.08039999999999999', '0.08929999999999999', '0.1483', '0.08460000000000001', '0.0751', '0.0751', '0.0771', '0.07519999999999999', '0.0925', '0.1465', '0.0805', '0.0733', '0.0726', '0.0755', '0.0786', '0.0852', '0.1349', '0.0727', '0.0745', '0.0666', '0.0676', '0.0692', '0.0758', '0.1103', '0.0654', '0.061900000000000004', '0.061', '0.061799999999999994', '0.0851', '0.1319', '0.0579', '0.032', '0.043', '0.052000000000000005', '0.0547', '0.0592', '0.049699999999999994', '0.056600000000000004', '0.0425', '0.0434', '0.0341', '0.0395', '0.0501', '0.050199999999999995', '0.056600000000000004', '0.0613', '0.0504', '0.049699999999999994', '0.054900000000000004', '0.059699999999999996', '0.0562', '0.0596', '0.0605', '0.0496', '0.045700000000000005', '0.055999999999999994', '0.0501', '0.045700000000000005', '0.047400000000000005', '0.0713', '0.0546', '0.0546', '0.0542', '0.0601', '0.0759', '0.0973', '0.092', '0.10400000000000001', '0.1192', '0.1578', '0.1643', '0.1042', '0.0521', '0.0344', '0.0269', '0.0217', '0.0191', '0.0217', '0.0239', '0.0269', '0.0298', '0.0334', '0.0354', '0.0382', '0.0461', '0.061399999999999996', '0.064', '0.035', '0.048']

    tianjin_move_in=['0.0218', '0.025', '0.024399999999999998', '0.024', '0.026000000000000002', '0.0226', '0.0222', '0.0239', '0.0245', '0.0232', '0.0256', '0.0275', '0.0265', '0.027999999999999997', '0.029900000000000003', '0.0291', '0.031', '0.028399999999999998', '0.0354', '0.0316', '0.031', '0.0313', '0.0296', '0.030299999999999997', '0.027999999999999997', '0.0311', '0.0278', '0.029900000000000003', '0.031', '0.031', '0.0345', '0.0434', '0.0274', '0.0194', '0.024700000000000003', '0.029500000000000002', '0.0282', '0.032400000000000005', '0.0336', '0.0282', '0.028399999999999998', '0.0225', '0.0305', '0.020099999999999996', '0.026099999999999998', '0.0334', '0.0313', '0.036000000000000004', '0.0334', '0.0365', '0.0382', '0.0358', '0.0337', '0.0373', '0.0287', '0.0316', '0.0338', '0.0331', '0.032799999999999996', '0.0362', '0.0407', '0.0418', '0.0404', '0.0397', '0.0483', '0.0403', '0.04019999999999999', '0.04190000000000001', '0.0434', '0.042800000000000005', '0.0461', '0.0444', '0.04019999999999999', '0.0294', '0.0173', '0.0146', '0.0138', '0.015', '0.0123', '0.0129', '0.0148', '0.016200000000000003', '0.018000000000000002', '0.0203', '0.023', '0.022099999999999998', '0.022799999999999997', '0.026699999999999998', '0.0239', '0.0197', '0.0227']

    xingtai_move_in=['0.1628', '0.1576', '0.1597', '0.1523', '0.146', '0.17370000000000002', '0.17329999999999998', '0.1602', '0.161', '0.153', '0.1518', '0.15039999999999998', '0.17059999999999997', '0.1702', '0.1531', '0.15439999999999998', '0.1578', '0.1505', '0.14029999999999998', '0.1617', '0.1684', '0.1609', '0.1557', '0.1506', '0.1557', '0.1454', '0.16820000000000002', '0.1617', '0.15259999999999999', '0.1496', '0.1418', '0.1364', '0.1834', '0.2052', '0.17980000000000002', '0.13949999999999999', '0.1283', '0.105', '0.1015', '0.0951', '0.1096', '0.1159', '0.1104', '0.1174', '0.09970000000000001', '0.1002', '0.10400000000000001', '0.1054', '0.0956', '0.11380000000000001', '0.1012', '0.12369999999999999', '0.1158', '0.1301', '0.1437', '0.1558', '0.1521', '0.1366', '0.13390000000000002', '0.142', '0.1441', '0.13119999999999998', '0.1432', '0.1384', '0.1307', '0.1387', '0.1353', '0.1292', '0.13699999999999998', '0.1334', '0.1336', '0.1243', '0.11720000000000001', '0.1478', '0.22820000000000001', '0.2457', '0.2353', '0.2234', '0.21760000000000002', '0.21239999999999998', '0.22769999999999999', '0.2164', '0.2054', '0.20350000000000001', '0.1953', '0.1877', '0.191', '0.1814', '0.1881', '0.16920000000000002', '0.17920000000000003']

    hengshui_move_in=['0.0799', '0.0785', '0.07690000000000001', '0.07629999999999999', '0.0725', '0.0839', '0.08380000000000001', '0.08220000000000001', '0.0817', '0.0832', '0.0779', '0.0748', '0.083', '0.08349999999999999', '0.0794', '0.0784', '0.0784', '0.0805', '0.07339999999999999', '0.0823', '0.08470000000000001', '0.083', '0.0851', '0.0803', '0.08259999999999999', '0.076', '0.078', '0.0788', '0.08130000000000001', '0.0803', '0.07150000000000001', '0.0707', '0.0934', '0.10369999999999999', '0.0894', '0.0667', '0.0643', '0.0636', '0.0736', '0.0747', '0.0698', '0.0776', '0.0913', '0.08070000000000001', '0.0759', '0.0669', '0.0733', '0.0757', '0.0765', '0.0801', '0.0812', '0.07440000000000001', '0.0816', '0.08310000000000001', '0.08449999999999999', '0.08130000000000001', '0.0863', '0.0843', '0.0951', '0.0805', '0.0897', '0.0787', '0.0781', '0.0735', '0.0662', '0.0713', '0.07150000000000001', '0.0662', '0.0704', '0.0721', '0.0684', '0.0674', '0.0722', '0.0925', '0.128', '0.1258', '0.11710000000000001', '0.1084', '0.09849999999999999', '0.09179999999999999', '0.09359999999999999', '0.0911', '0.0902', '0.0877', '0.08789999999999999', '0.08810000000000001', '0.0928', '0.0906', '0.0883', '0.0775', '0.08259999999999999']

    list_a=[beijing_move_in,tianjin_move_in,xingtai_move_in,hengshui_move_in]


    beijing_move_out=['0.084', '0.0809', '0.0774', '0.0781', '0.0723', '0.0793', '0.1286', '0.08349999999999999', '0.07629999999999999', '0.0782', '0.0779', '0.0696', '0.0782', '0.1266', '0.08070000000000001', '0.0755', '0.07339999999999999', '0.0727', '0.0719', '0.0716', '0.1161', '0.0717', '0.064', '0.0602', '0.0594', '0.059800000000000006', '0.057', '0.0862', '0.049', '0.042699999999999995', '0.0382', '0.0301', '0.0344', '0.07690000000000001', '0.1388', '0.06709999999999999', '0.0374', '0.0305', '0.028300000000000002', '0.0294', '0.0184', '0.0182', '0.0127', '0.0151', '0.015300000000000001', '0.0256', '0.0174', '0.015', '0.0143', '0.016', '0.015', '0.013500000000000002', '0.011899999999999999', '0.013000000000000001', '0.0079', '0.0108', '0.0091', '0.0104', '0.010700000000000001', '0.0131', '0.0089', '0.005699999999999999', '0.0067', '0.006', '0.0076', '0.006', '0.0075', '0.0075', '0.0087', '0.006999999999999999', '0.015700000000000002', '0.022799999999999997', '0.02', '0.0223', '0.0206', '0.0276', '0.0385', '0.0623', '0.07730000000000001', '0.10640000000000001', '0.0719', '0.0668', '0.0723', '0.0852', '0.0605', '0.056299999999999996', '0.053200000000000004', '0.0481', '0.052000000000000005', '0.0679', '0.10099999999999999']

    tianjin_move_out=['0.021099999999999997', '0.022400000000000003', '0.0217', '0.022099999999999998', '0.0217', '0.0216', '0.027200000000000002', '0.024700000000000003', '0.0242', '0.0246', '0.024399999999999998', '0.0239', '0.0265', '0.0259', '0.024300000000000002', '0.0241', '0.024', '0.024700000000000003', '0.026000000000000002', '0.025', '0.026000000000000002', '0.0254', '0.0252', '0.025699999999999997', '0.0287', '0.0282', '0.0275', '0.0285', '0.027000000000000003', '0.024700000000000003', '0.0232', '0.020499999999999997', '0.025099999999999997', '0.039', '0.0401', '0.027000000000000003', '0.0241', '0.0199', '0.0171', '0.0233', '0.016399999999999998', '0.017', '0.015', '0.0192', '0.0199', '0.0194', '0.0194', '0.0225', '0.0285', '0.030699999999999998', '0.0348', '0.0379', '0.0317', '0.0326', '0.0274', '0.0354', '0.0259', '0.0331', '0.0342', '0.032', '0.024', '0.021099999999999997', '0.028399999999999998', '0.0259', '0.0287', '0.0305', '0.0264', '0.0232', '0.020499999999999997', '0.016', '0.0127', '0.0116', '0.0087', '0.0105', '0.018500000000000003', '0.021400000000000002', '0.0209', '0.0292', '0.0333', '0.0352', '0.036699999999999997', '0.0362', '0.0323', '0.030699999999999998', '0.028999999999999998', '0.0311', '0.0316', '0.026099999999999998', '0.0282', '0.0335', '0.0368']

    xingtai_move_out=['0.14429999999999998', '0.1481', '0.146', '0.1462', '0.1698', '0.16010000000000002', '0.1315', '0.13', '0.1322', '0.1404', '0.1421', '0.1629', '0.1462', '0.1386', '0.1364', '0.1407', '0.1398', '0.1413', '0.1557', '0.14550000000000002', '0.1351', '0.13949999999999999', '0.142', '0.1439', '0.1482', '0.15689999999999998', '0.1451', '0.1384', '0.1489', '0.1506', '0.15560000000000002', '0.19920000000000002', '0.17579999999999998', '0.141', '0.1093', '0.0986', '0.1328', '0.1085', '0.11', '0.1413', '0.139', '0.154', '0.1672', '0.1566', '0.1572', '0.16149999999999998', '0.1578', '0.1514', '0.1533', '0.1444', '0.1505', '0.1437', '0.1606', '0.1761', '0.1507', '0.1674', '0.1725', '0.1479', '0.1508', '0.14550000000000002', '0.1668', '0.1452', '0.1562', '0.1788', '0.1668', '0.1612', '0.16510000000000002', '0.1929', '0.2086', '0.2289', '0.22', '0.2184', '0.1967', '0.19510000000000002', '0.19039999999999999', '0.18489999999999998', '0.1841', '0.1517', '0.1551', '0.1454', '0.161', '0.1516', '0.1474', '0.1445', '0.1471', '0.1505', '0.1636', '0.1789', '0.17489999999999997', '0.1366', '0.1363']

    hengshui_move_out=['0.0674', '0.0673', '0.0695', '0.0703', '0.076', '0.0735', '0.0683', '0.06860000000000001', '0.0704', '0.0702', '0.0735', '0.08439999999999999', '0.07339999999999999', '0.0675', '0.0689', '0.0706', '0.069', '0.0649', '0.0738', '0.0727', '0.068', '0.0716', '0.0716', '0.0693', '0.0733', '0.07490000000000001', '0.0689', '0.0691', '0.0711', '0.0742', '0.0787', '0.1033', '0.09519999999999999', '0.07780000000000001', '0.0596', '0.050199999999999995', '0.06269999999999999', '0.061399999999999996', '0.075', '0.09630000000000001', '0.11689999999999999', '0.1402', '0.12560000000000002', '0.1134', '0.12240000000000001', '0.1166', '0.1101', '0.1232', '0.11259999999999999', '0.11699999999999999', '0.11199999999999999', '0.1157', '0.1097', '0.09910000000000001', '0.09230000000000001', '0.0863', '0.1008', '0.09519999999999999', '0.0806', '0.0753', '0.055999999999999994', '0.0713', '0.0705', '0.07429999999999999', '0.0736', '0.0745', '0.065', '0.0737', '0.071', '0.0779', '0.08689999999999999', '0.0894', '0.0901', '0.0974', '0.1099', '0.1119', '0.1167', '0.10289999999999999', '0.095', '0.0812', '0.08960000000000001', '0.0851', '0.08710000000000001', '0.07919999999999999', '0.07980000000000001', '0.0809', '0.08460000000000001', '0.0892', '0.0958', '0.07780000000000001', '0.0731']
    list_b=[beijing_move_out,tianjin_move_out,xingtai_move_out,hengshui_move_out]


    #处理列表相加
    # for i,j in zip(list_a,list_b):
    #     sum_lst = [(float(x) + float(y))/2 for x, y in zip(i, j)]
    #     print("处理后的后的列表",sum_lst)
    #     print("处理后的后的列表长度",len(sum_lst))




    listday = getdaylist(20201201,20210301)
    # beijing_flow =  [0.023350000000000003, 0.02285, 0.02185, 0.024800000000000003, 0.02935, 0.02525, 0.027299999999999998, 0.023150000000000004, 0.02225, 0.02185, 0.0238, 0.0271, 0.024849999999999997, 0.026300000000000004, 0.0232, 0.02225, 0.02185, 0.02355, 0.028700000000000003, 0.0242, 0.02685, 0.02285, 0.022600000000000002, 0.02255, 0.02285, 0.027200000000000002, 0.02195, 0.025050000000000003, 0.02205, 0.022449999999999998, 0.02435, 0.0304, 0.02335, 0.02595, 0.027500000000000004, 0.0222, 0.01895, 0.008150000000000001, 0.00405, 0.003, 0.0015, 0.0013, 0.00105, 0.0012, 0.0017000000000000001, 0.0029499999999999995, 0.0024999999999999996, 0.0023, 0.0018, 0.00245, 0.0020499999999999997, 0.0020499999999999997, 0.002, 0.0026, 0.0024, 0.002, 0.002, 0.0027, 0.0028, 0.0036, 0.00365, 0.0046, 0.0039, 0.00445, 0.00475, 0.00465, 0.0057, 0.006, 0.00625, 0.00665, 0.0103, 0.015899999999999997, 0.018349999999999998, 0.016550000000000002, 0.0132, 0.012299999999999998, 0.0132, 0.013250000000000001, 0.013600000000000001, 0.013049999999999999, 0.012400000000000001, 0.01305, 0.0131, 0.0151, 0.0149, 0.0148, 0.0157, 0.01765, 0.0196, 0.0165, 0.019799999999999998]
    #
    # tianjin_flow = [0.02035, 0.0208, 0.020499999999999997, 0.02095, 0.02035, 0.019299999999999998, 0.0207, 0.0211, 0.0206, 0.02045, 0.01985, 0.019299999999999998, 0.021650000000000003, 0.02015, 0.0218, 0.02135, 0.021249999999999998, 0.020499999999999997, 0.0222, 0.02165, 0.021150000000000002, 0.0223, 0.02225, 0.02325, 0.023100000000000002, 0.02305, 0.02185, 0.0227, 0.02385, 0.024599999999999997, 0.0239, 0.02595, 0.0228, 0.0249, 0.024599999999999997, 0.02355, 0.0203, 0.00935, 0.0045000000000000005, 0.00285, 0.00235, 0.0015, 0.0021, 0.00185, 0.0023, 0.0026499999999999996, 0.00245, 0.0033, 0.00305, 0.0039000000000000003, 0.0044, 0.004399999999999999, 0.0041, 0.0044, 0.00425, 0.0045000000000000005, 0.00465, 0.0049, 0.0058, 0.007050000000000001, 0.008150000000000001, 0.008400000000000001, 0.00865, 0.0097, 0.012, 0.012799999999999999, 0.01155, 0.0112, 0.01155, 0.011, 0.01155, 0.01215, 0.01165, 0.01025, 0.00915, 0.0091, 0.009, 0.010499999999999999, 0.010700000000000001, 0.01, 0.0122, 0.0129, 0.0125, 0.0135, 0.016, 0.0162, 0.01685, 0.016849999999999997, 0.016350000000000003, 0.015899999999999997, 0.0175]
    #
    # xingtai_flow = [0.2817, 0.27790000000000004, 0.27645, 0.27695000000000003, 0.31205, 0.30110000000000003, 0.2914, 0.26744999999999997, 0.26355, 0.26925, 0.28045, 0.3026, 0.29625, 0.30495, 0.2759, 0.27965, 0.28059999999999996, 0.28475, 0.30755, 0.30095000000000005, 0.306, 0.2914, 0.29369999999999996, 0.29235, 0.30390000000000006, 0.3062, 0.2884, 0.29479999999999995, 0.2848, 0.29485, 0.29835, 0.344, 0.32975, 0.33575, 0.3007, 0.26625, 0.26045, 0.1325, 0.10045000000000001, 0.1041, 0.12415000000000001, 0.14115, 0.16175, 0.16749999999999998, 0.16999999999999998, 0.17415, 0.15615, 0.1157, 0.11225000000000002, 0.10625, 0.09595, 0.0934, 0.0933, 0.10055, 0.0998, 0.11465, 0.1158, 0.10145000000000001, 0.1049, 0.1169, 0.15894999999999998, 0.14150000000000001, 0.1523, 0.17065000000000002, 0.1686, 0.18864999999999998, 0.19415, 0.2151, 0.23060000000000003, 0.25725, 0.2781, 0.30410000000000004, 0.30955, 0.29555000000000003, 0.2813, 0.2908, 0.29984999999999995, 0.2724, 0.28545, 0.2666, 0.26185, 0.2456, 0.2373, 0.25605, 0.24914999999999998, 0.25229999999999997, 0.2766, 0.2796, 0.28784999999999994, 0.24370000000000003, 0.26895]
    #
    # hengshui_flow = [0.19005, 0.1844, 0.18860000000000002, 0.19435, 0.20065, 0.19115, 0.2025, 0.19645, 0.1923, 0.1923, 0.19945000000000002, 0.19855, 0.1898, 0.20325, 0.1981, 0.1975, 0.19419999999999998, 0.19735, 0.2078, 0.20600000000000002, 0.21365, 0.21359999999999998, 0.2159, 0.20995, 0.21550000000000002, 0.21205000000000002, 0.19340000000000002, 0.2082, 0.20145000000000002, 0.20825, 0.19185, 0.1981, 0.21234999999999998, 0.21295000000000003, 0.19645, 0.1789, 0.17265, 0.08660000000000001, 0.06065, 0.0485, 0.04255, 0.0419, 0.043899999999999995, 0.0464, 0.051449999999999996, 0.0519, 0.056150000000000005, 0.05835, 0.0553, 0.058300000000000005, 0.06255000000000001, 0.05845, 0.06365000000000001, 0.0639, 0.0649, 0.06205000000000001, 0.06565, 0.06085, 0.062400000000000004, 0.0688, 0.08205, 0.08205000000000001, 0.08515, 0.09345, 0.09184999999999999, 0.10205, 0.09545000000000001, 0.0998, 0.1015, 0.1117, 0.12735000000000002, 0.14695, 0.16435, 0.1669, 0.15445, 0.1515, 0.15645, 0.14825, 0.15685, 0.1456, 0.1537, 0.1522, 0.1516, 0.15839999999999999, 0.16335, 0.1627, 0.16920000000000002, 0.17995, 0.1776, 0.1422, 0.16055000000000003]
    #

    beijing_flow =  [0.023350000000000003, 0.02285, 0.02185, 0.024800000000000003, 0.02935, 0.02525, 0.027299999999999998, 0.023150000000000004, 0.02225, 0.02185, 0.0238, 0.0271, 0.024849999999999997, 0.026300000000000004, 0.0232, 0.02225, 0.02185, 0.02355, 0.028700000000000003, 0.0242, 0.02685, 0.02285, 0.022600000000000002, 0.02255, 0.02285, 0.027200000000000002, 0.02195, 0.025050000000000003, 0.02205, 0.022449999999999998, 0.02435, 0.0304, 0.02335, 0.02595, 0.027500000000000004, 0.0222, 0.01895, 0.008150000000000001, 0.00405, 0.003, 0.0027, 0.0020499999999999997, 0.00165, 0.0019, 0.0024000000000000002, 0.00245, 0.0029, 0.00365, 0.00275, 0.00245, 0.0029, 0.0031999999999999997, 0.003, 0.0031999999999999997, 0.0039, 0.0036, 0.0036, 0.0066500000000000005, 0.010549999999999999, 0.0127, 0.01105, 0.01075, 0.00975, 0.0103, 0.010450000000000001, 0.0098, 0.0106, 0.0105, 0.01105, 0.01175, 0.0132, 0.01495, 0.015300000000000001, 0.015, 0.0139, 0.01415, 0.01365, 0.015799999999999998]

    tianjin_flow =  [0.02035, 0.0208, 0.020499999999999997, 0.02095, 0.02035, 0.019299999999999998, 0.0207, 0.0211, 0.0206, 0.02045, 0.01985, 0.019299999999999998, 0.021650000000000003, 0.02015, 0.0218, 0.02135, 0.021249999999999998, 0.020499999999999997, 0.0222, 0.02165, 0.021150000000000002, 0.0223, 0.02225, 0.02325, 0.023100000000000002, 0.02305, 0.02185, 0.0227, 0.02385, 0.024599999999999997, 0.0239, 0.02595, 0.0228, 0.0249, 0.024599999999999997, 0.02355, 0.0203, 0.00935, 0.0045000000000000005, 0.00285, 0.00235, 0.0015, 0.0021, 0.00185, 0.0023, 0.0026499999999999996, 0.00245, 0.0033, 0.00305, 0.0039000000000000003, 0.0044, 0.004399999999999999, 0.0041, 0.0044, 0.00425, 0.0045000000000000005, 0.00465, 0.0049, 0.0058, 0.007050000000000001, 0.008150000000000001, 0.008400000000000001, 0.00865, 0.0097, 0.012, 0.012799999999999999, 0.01155, 0.0112, 0.01155, 0.011, 0.01155, 0.01215, 0.01165, 0.01025, 0.00915, 0.0091, 0.009, 0.010499999999999999, 0.010700000000000001, 0.01, 0.0122, 0.0129, 0.0125, 0.0135, 0.016, 0.0162, 0.01685, 0.016849999999999997, 0.016350000000000003, 0.015899999999999997, 0.0175]

    xingtai_flow =  [0.2817, 0.27790000000000004, 0.27645, 0.27695000000000003, 0.31205, 0.30110000000000003, 0.2914, 0.26744999999999997, 0.26355, 0.26925, 0.28045, 0.3026, 0.29625, 0.30495, 0.2759, 0.27965, 0.28059999999999996, 0.28475, 0.30755, 0.30095000000000005, 0.306, 0.2914, 0.29369999999999996, 0.29235, 0.30390000000000006, 0.3062, 0.2884, 0.29479999999999995, 0.2848, 0.29485, 0.29835, 0.344, 0.32975, 0.33575, 0.3007, 0.26625, 0.26045, 0.1325, 0.10045000000000001, 0.1041, 0.12415000000000001, 0.14115, 0.16175, 0.16749999999999998, 0.16999999999999998, 0.17415, 0.15615, 0.1157, 0.11225000000000002, 0.10625, 0.09595, 0.0934, 0.0933, 0.10055, 0.0998, 0.11465, 0.1158, 0.10145000000000001, 0.1049, 0.1169, 0.15894999999999998, 0.14150000000000001, 0.1523, 0.17065000000000002, 0.1686, 0.18864999999999998, 0.19415, 0.2151, 0.23060000000000003, 0.25725, 0.2781, 0.30410000000000004, 0.30955, 0.29555000000000003, 0.2813, 0.2908, 0.29984999999999995, 0.2724, 0.28545, 0.2666, 0.26185, 0.2456, 0.2373, 0.25605, 0.24914999999999998, 0.25229999999999997, 0.2766, 0.2796, 0.28784999999999994, 0.24370000000000003, 0.26895]

    hengshui_flow =  [0.19005, 0.1844, 0.18860000000000002, 0.19435, 0.20065, 0.19115, 0.2025, 0.19645, 0.1923, 0.1923, 0.19945000000000002, 0.19855, 0.1898, 0.20325, 0.1981, 0.1975, 0.19419999999999998, 0.19735, 0.2078, 0.20600000000000002, 0.21365, 0.21359999999999998, 0.2159, 0.20995, 0.21550000000000002, 0.21205000000000002, 0.19340000000000002, 0.2082, 0.20145000000000002, 0.20825, 0.19185, 0.1981, 0.21234999999999998, 0.21295000000000003, 0.19645, 0.1789, 0.17265, 0.08660000000000001, 0.06065, 0.0485, 0.04255, 0.0419, 0.043899999999999995, 0.0464, 0.051449999999999996, 0.0519, 0.056150000000000005, 0.05835, 0.0553, 0.058300000000000005, 0.06255000000000001, 0.05845, 0.06365000000000001, 0.0639, 0.0649, 0.06205000000000001, 0.06565, 0.06085, 0.062400000000000004, 0.0688, 0.08205, 0.08205000000000001, 0.08515, 0.09345, 0.09184999999999999, 0.10205, 0.09545000000000001, 0.0998, 0.1015, 0.1117, 0.12735000000000002, 0.14695, 0.16435, 0.1669, 0.15445, 0.1515, 0.15645, 0.14825, 0.15685, 0.1456, 0.1537, 0.1522, 0.1516, 0.15839999999999999, 0.16335, 0.1627, 0.16920000000000002, 0.17995, 0.1776, 0.1422, 0.16055000000000003]



    # for i, j in zip(listday,range(len(beijing_flow))):
    #     print(i,j)
    #
    # lock_down_propotion = hengshui_flow[37:59]
    # unlock_down_propotion = hengshui_flow[14:36]
    # print(sum(lock_down_propotion)/len(lock_down_propotion))
    # print(sum(unlock_down_propotion)/len(unlock_down_propotion))
    # print(caculate_down_propotion(unlock_down_propotion,lock_down_propotion))





#北京 -0.8978
#天津 -0.8337
#邢台 -0.5906

#衡水 -0.7176


























